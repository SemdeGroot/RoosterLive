{% extends "base.html" %}
{% load role_tags %}
{% block title %}Rooster{% endblock %}
{% block head %}
<script>
  const initialHash = "{{ doc_hash }}";
  const intervalSec = parseInt("{{ hash_poll|default:60 }}");
  async function checkHash(){
    try{
      const r = await fetch("/hash/", {cache:"no-store"});
      if(r.ok){
        const latest = (await r.text()).trim();
        if(latest && latest !== initialHash) location.reload();
      }
    }catch(e){}
  }
  setInterval(checkHash, intervalSec * 1000);
</script>
{% endblock %}
{% block content %}
  <div class="card">
    <div class="pages">
      {% if not page_urls %}
        <div style="padding:16px;">Nog geen rooster ge√ºpload.</div>
      {% endif %}
      {% for url in page_urls %}
        <div class="page"><img src="{{ url }}" alt="Rooster pagina {{ forloop.counter }}" loading="lazy"></div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
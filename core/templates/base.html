{% load static %}
<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Rooster{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/base/base.css' %}">
  {% block head %}{% endblock %}
</head>
<body>
  <div class="app">
    <header class="header">
      <a href="{% url 'home' %}" class="logo-wrap">
        <img class="logo" src="{% static 'img/logo.jpg' %}" alt="Logo">
      </a>
      <div class="title">{% block header_title %}{{ page_title|default:"Rooster" }}{% endblock %}</div>

      <!-- Hamburger knop (mobiel) -->
      <button class="nav-toggle" id="navToggle"
              aria-label="Open navigatie"
              aria-controls="navPanel"
              aria-expanded="false">
        <span class="burger" aria-hidden="true"></span>
        <span class="sr-only" style="position:absolute;left:-9999px">Menu</span>
      </button>

      <!-- Originele inline nav (desktop) -->
      <nav class="nav" aria-label="Hoofdmenu">
        {% if request.resolver_match.url_name != 'home' %}<a href="{% url 'home' %}">Home</a>{% endif %}
        {% if perms.core.can_view_roster and request.resolver_match.url_name != 'rooster' %}<a href="{% url 'rooster' %}">Rooster</a>{% endif %}

        {# ▼ Beschikbaarheid-hoofdpagina verwijderd; toon losse items #}
        {% if perms.core.can_view_av_medications and request.resolver_match.url_name != 'medications' %}
          <a href="{% url 'medications' %}">Voorraad</a>
        {% endif %}
        {% if perms.core.can_view_av_nazendingen and request.resolver_match.url_name != 'nazendingen' %}
          <a href="{% url 'nazendingen' %}">Nazendingen</a>
        {% endif %}

        {% if perms.core.can_view_policies and request.resolver_match.url_name != 'policies' %}<a href="{% url 'policies' %}">Werkafspraken</a>{% endif %}
        {% if perms.core.can_view_news and request.resolver_match.url_name != 'news' %}<a href="{% url 'news' %}">Nieuws</a>{% endif %}
        {% if perms.core.can_access_admin and request.resolver_match.url_name != 'admin_panel' %}<a href="{% url 'admin_panel' %}">Beheer</a>{% endif %}

        {% if request.user.is_authenticated %}
          <form action="{% url 'logout' %}" method="post" style="display:inline;">
            {% csrf_token %}<button type="submit">Uitloggen</button>
          </form>
        {% else %}
          <a href="{% url 'login' %}">Login</a>
        {% endif %}
      </nav>
    </header>

    <!-- Mobiel paneel nav (zelfde links, maar onder elkaar) -->
    <nav class="nav-panel" id="navPanel" hidden aria-label="Hoofdmenu mobiel">
      <div class="nav-links">
        {% if request.resolver_match.url_name != 'home' %}<a href="{% url 'home' %}">Home</a>{% endif %}
        {% if perms.core.can_view_roster and request.resolver_match.url_name != 'rooster' %}<a href="{% url 'rooster' %}">Rooster</a>{% endif %}

        {# ▼ Zelfde losse items op mobiel #}
        {% if perms.core.can_view_av_medications and request.resolver_match.url_name != 'medications' %}
          <a href="{% url 'medications' %}">Voorraad</a>
        {% endif %}
        {% if perms.core.can_view_av_nazendingen and request.resolver_match.url_name != 'nazendingen' %}
          <a href="{% url 'nazendingen' %}">Nazendingen</a>
        {% endif %}

        {% if perms.core.can_view_policies and request.resolver_match.url_name != 'policies' %}<a href="{% url 'policies' %}">Werkafspraken</a>{% endif %}
        {% if perms.core.can_view_news and request.resolver_match.url_name != 'news' %}<a href="{% url 'news' %}">Nieuws</a>{% endif %}
        {% if perms.core.can_access_admin and request.resolver_match.url_name != 'admin_panel' %}<a href="{% url 'admin_panel' %}">Beheer</a>{% endif %}

        {% if request.user.is_authenticated %}
          <form action="{% url 'logout' %}" method="post" style="display:inline;">
            {% csrf_token %}<button type="submit">Uitloggen</button>
          </form>
        {% else %}
          <a href="{% url 'login' %}">Login</a>
        {% endif %}
      </div>
    </nav>

    <main class="content">
      {% for m in messages %}<div class="flash">{{ m }}</div>{% endfor %}
      {% block content %}{% endblock %}
    </main>

    <footer class="footer">
      <div>© {% now "Y" %} Apotheek Jansen Amersfoort - Sem de Groot</div><div></div>
    </footer>
  </div>

  <script src="{% static 'js/base/base.js' %}" defer></script>
</body>
</html>
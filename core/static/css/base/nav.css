/* static/css/base/nav.css */
/* =========================================
   NAV (mobile panel + desktop sidebar)
   ========================================= */

/* Desktop nav (oude top nav; compat) */
.nav{
  margin:0; padding:0;
  display:none; gap:10px; flex-wrap:wrap;
}
.nav a, .nav .nav-btn{
  color:var(--text); background:var(--button-color); border:1px solid var(--border);
  padding:10px 14px; border-radius:10px; text-decoration:none; cursor:pointer;
  font:inherit; line-height:1.2; display:inline-flex; align-items:center; justify-content:center;
  transition:background .2s ease, border-color .2s ease;
}
.nav a:hover, .nav .nav-btn:hover{ background:var(--button-hover); border-color:var(--accent); }
.nav a.active{ border-color:var(--accent); background:rgba(31,75,160,.15); }
.nav .nav-btn.nav-logout{ color: var(--logout-color); }
.nav .nav-btn.nav-logout:hover{ background: var(--button-hover); border-color: var(--danger-border); }

/* ===========================
   MOBILE: hamburger + panel
   =========================== */

.nav-toggle{
  display:flex; flex-direction:column; justify-content:center; align-items:center; gap:5px;
  background:transparent; border:none; padding:8px; cursor:pointer; width:44px; height:44px;
  border-radius:10px; transition:background .2s ease; flex-shrink:0;
}
.nav-toggle:hover{ background:rgba(255,255,255,.05); }

.burger-line{
  display:block; width:24px; height:2.5px; background:var(--text); border-radius:2px;
  transition:transform .25s ease, opacity .2s ease; transform-origin:center;
}
.nav-toggle[aria-expanded="true"] .burger-line-1{ transform:translateY(7.5px) rotate(45deg); }
.nav-toggle[aria-expanded="true"] .burger-line-2{ opacity:0; transform:scaleX(0); }
.nav-toggle[aria-expanded="true"] .burger-line-3{ transform:translateY(-7.5px) rotate(-45deg); }

/* Overlay & mobile panel */
.nav-overlay{
  display:none; position:fixed; inset:0; background:rgba(0,0,0,.7); backdrop-filter:blur(4px);
  z-index:1100; opacity:0; transition:opacity .25s ease;
}
.nav-overlay.active{ display:block; opacity:1; }

.nav-panel{
  position:fixed; top:0; right:0; bottom:0; width:min(320px,85vw);
  background:var(--panel);
  border-left:1px solid var(--border); box-shadow:-8px 0 40px var(--shadow);
  padding:0; display:flex; flex-direction:column; z-index:1200;
  transform:translateX(100%); transition:transform .25s ease;
  overflow-y:auto;
}
.nav-panel.open{ transform:translateX(0); }

.nav-panel-header{
  display:flex; justify-content:space-between; align-items:center;
  padding:20px; border-bottom:1px solid var(--border); flex-shrink:0;
}
.nav-panel-title{ font-size:1.3rem; font-weight:700; color:var(--text); }
.nav-close{
  background:transparent; border:none; color:var(--text); cursor:pointer; padding:8px;
  display:flex; align-items:center; justify-content:center; border-radius:8px;
  transition:background .2s ease;
}
.nav-close:hover{ background:rgba(255,255,255,.1); }

.nav-links{ display:flex; flex-direction:column; gap:4px; padding:12px; flex:1; }
.nav-links form{ display:contents; }

/* ===========================
   LINKS (shared mobile+desktop)
   =========================== */

.nav-link{
  display:grid;
  grid-template-columns: 30px 1fr 26px; /* icon / label / caret */
  align-items:center;
  column-gap:10px;

  padding:12px 14px;
  color:var(--text);
  text-decoration:none;
  border-radius:12px;

  transition:background .2s ease, border-color .2s ease;
  cursor:pointer;
  background:transparent;
  border:2px solid transparent;

  width:100%;
  text-align:left;
  font:inherit;
  font-size:1rem;

  min-width:0;
}

/* summary gebruikt exact dezelfde layout */
.nav-item--summary{
  display:grid;
  grid-template-columns: 30px 1fr 26px;
  align-items:center;
  column-gap:10px;
}

/* lege 3e kolom voor normale links zodat grid gelijk blijft */
.nav-link > span[aria-hidden="true"]{
  grid-column:3;
}

.nav-link.active{
  border-color:var(--accent);
  background:rgba(31,75,160,.15);
}

.nav-divider{ height:1px; background:var(--border); margin:12px 0; }

/* Logout (kleur + hover) */
.nav-link.nav-logout{ color:var(--logout-color); }
@media (hover:hover) and (pointer:fine){
  .nav-link.nav-logout:hover{
    background:rgba(255,107,107,.1);
    border-color:var(--danger-border);
    color:var(--logout-color);
  }
}

/* Hover alleen desktop */
@media (hover:hover) and (pointer:fine){
  .nav-link:hover{
    background:var(--button-hover);
    border-color:var(--accent);
  }
}
/* Touch: hover uit */
@media (hover:none) and (pointer:coarse){
  .nav-link:hover{
    background:transparent;
    border-color:transparent;
  }
}

/* icon */
.nav-icon{
  grid-column:1;
  width:28px; height:28px;
  flex-shrink:0;
  background-image: var(--icon);
  background-position:center;
  background-size:contain;
  background-repeat:no-repeat;
  background-color:transparent;
  border:none;
  border-radius:0;
  box-shadow:none;
  transition:transform .2s ease;
}
@media (min-width:900px){
  .nav-icon{ width:30px; height:30px; }
}

/* ===========================
   LABELS: ALTIJD 1 REGEL (NO WRAP) + ELLIPSIS
   - dit stopt "Openbare Apo." op newline
   =========================== */

/* Cruciaal in grid: item mag krimpen */
.nav-label{
  grid-column:2;
  min-width:0;
  display:block;

  /* Forceren: nooit naar newline */
  white-space:nowrap !important;

  /* Ellipsis als het niet past */
  overflow:hidden;
  text-overflow:ellipsis;

  /* Extra zekerheid tegen rare break rules */
  overflow-wrap:normal !important;
  word-break:normal !important;
  hyphens:none !important;
}

/* Als er ergens per ongeluk <br> in de label zou zitten: negeren */
.nav-label br{ display:none; }

/* ===========================
   DETAILS + caret
   =========================== */

.nav-group{ margin:0; padding:0; border:0; }
.nav-group > summary{ list-style:none; }
.nav-group > summary::-webkit-details-marker{ display:none; }

.nav-caret-icon{
  grid-column:3;
  justify-self:end;
  width:22px;
  height:22px;
  opacity:.82;
  transition:transform .28s ease;
  transform-origin:center;
  transform:rotate(0deg); /* down */
}
.nav-group[open] > summary .nav-caret-icon{
  transform:rotate(180deg);
}

/* sub-items */
.nav-sub{
  display:flex;
  flex-direction:column;
  gap:2px;
  padding-left:12px;
  margin-top:2px;
  margin-bottom:6px;
}
.nav-link.sub{
  padding:10px 14px;
  font-size:.98rem;
  opacity:.95;
}
.nav-group.nav-level-2 .nav-sub { padding-left:18px; }
.nav-group.nav-level-3 .nav-sub { padding-left:26px; }

/* ===========================
   DESKTOP sidebar layout
   Default = collapsed; open via html.sidebar-open
   =========================== */

.sidebar{ display:none; }

@media (min-width:900px){
  .nav-toggle{ display:none !important; }
  .nav-overlay, .nav-panel{ display:none !important; }

  /* default = collapsed */
  .app{
    display:grid;
    --sidebar-width:84px;
    grid-template-columns: var(--sidebar-width) 1fr;
    grid-template-rows:auto 1fr auto;
    grid-template-areas:
      "header header"
      "sidebar content"
      "footer footer";
    min-height:100dvh;
    transition:grid-template-columns .22s cubic-bezier(.4,0,.2,1);
  }

  html.sidebar-open .app{ --sidebar-width:290px; }

  .header{ grid-area:header; }
  .content{ grid-area:content; }
  .footer{ grid-area:footer; }

  .sidebar{
    grid-area:sidebar;
    display:flex;
    flex-direction:column;
    gap:10px;
    padding:12px 10px;
    border-right:1px solid var(--border);
    background:var(--panel);
    height:100%;
    min-height:0;
    align-self:stretch;
  }

  .nav{ display:none !important; }

  /* minder ruimte tussen toggle en eerste icon: verlaag bottom padding */
  .sidebar-top{
    display:flex;
    justify-content:flex-end;
    padding:0 6px 0px;
  }
  html:not(.sidebar-open) .sidebar-top{
    justify-content:center;
  }

  .sidebar-toggle{
    padding:8px;
    width:44px;
    height:44px;
    border-radius:10px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
  }

  .sidebar-arrow{
    display:block;
    width:22px;
    height:22px;
    opacity:.9;
    transition:transform .50s ease;
    transform-origin:center;
  }
  html:not(.sidebar-open) .sidebar-arrow{ transform:rotate(180deg); }

  .sidebar-nav{
    display:flex;
    flex-direction:column;
    gap:4px;
    flex:1;
    min-height:0;
    overflow:auto;
    padding-right:2px;
  }

  .nav-bottom{
    padding-top:0px;
  }
  .nav-logout-form{ display:contents; }

  /* collapsed: labels + carets verbergen, icon positie blijft gelijk */
  html:not(.sidebar-open) .sidebar .nav-label{ display:none; }
  html:not(.sidebar-open) .sidebar .nav-caret-icon{ display:none; }
  html:not(.sidebar-open) .sidebar .nav-sub{ padding-left:0; }

  html:not(.sidebar-open) .sidebar .nav-link{
    grid-template-columns:30px 1fr 0px;
    column-gap:0;
    padding-left:14px;
    padding-right:14px;
  }
}

/* ---- Forceer: active link blijft active (ook bij summary caret tap op mobile) ---- */
.nav-link.active,
.nav-link.active:active,
.nav-link.active:focus,
.nav-link.active:focus-visible{
  border-color: var(--accent);
  background: rgba(31,75,160,.15);
}

/* iOS tap highlight minder “weird” */
summary.nav-link{
  -webkit-tap-highlight-color: transparent;
}

/* === Date navigator === */

/* =========================================================
   Date navigation / week picker (shared)
   Gebruikt door: mijnbeschikbaarheid, personeelsdashboard, rooster, etc.
   ========================================================= */

.week-controls{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  margin:12px 0;
  flex-wrap:wrap;            /* desktop mag wrappen (zoals nu) */
}

.btn-icon{
  width:44px;
  height:44px;
  padding:0;
  display:grid;
  place-items:center;
  flex:0 0 auto;
}

.week-picker{
  position:relative;
  display:inline-block;
  flex:0 1 auto;
  min-width:0;               /* belangrijk zodat hij op mobile kan krimpen */
}

.week-picker-btn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;

  min-width:260px;
  max-width:100%;
  min-height:44px;

  /* belangrijk voor 1-line gedrag van de inhoud */
  white-space:nowrap;
}

.wp-label{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;    /* als header_title lang is -> ... */
  min-width:0;
}

.week-picker-btn[aria-expanded="true"] .wp-caret{ transform:rotate(180deg); }

.wp-caret{
  display:flex;
  align-items:center;
  justify-content:center;
  line-height:0;
  transition:transform .15s ease;
  vertical-align:middle;
  flex:0 0 auto;
}

.wp-caret svg{ display:block; }

/* Dropdown */
.week-menu{
  position:absolute;
  top:calc(100% + 6px);
  left:50%;
  transform:translateX(-50%);

  /* responsive dropdown: niet buiten viewport duwen */
  min-width:min(340px, calc(100vw - 16px));
  max-width:calc(100vw - 16px);

  max-height:280px;
  overflow:auto;

  background:var(--panel);
  border:1px solid var(--border);
  border-radius:10px;
  box-shadow:0 8px 24px rgba(0,0,0,.3);
  padding:6px;

  z-index:1000; /* 1 waarde overal (niet per pagina anders) */
}

.week-option{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-radius:8px;
  cursor:pointer;
}

.week-option:hover,
.week-option:focus{
  background: var(--button-hover);
  outline:none !important;
  box-shadow:none;
  border:none;
}

.week-option.is-active{ border:1px solid var(--accent); }
.week-option small{ color:var(--muted); }

/* Daterange label (gebruik je al op meerdere plekken) */
.availability-daterange{
  color:var(--muted);
  font-weight:500;
  font-size:1.1rem;
  text-align:center;
  margin-bottom:12px;
}

/* =========================================================
   Mobile: forced 1-line + compacter (Gerepareerd)
   ========================================================= */
@media (max-width:640px){
  .week-controls {
    flex-wrap: nowrap; /* Nooit wrappen op mobile */
    gap: 6px;          /* Iets kleinere gap tussen knoppen */
    justify-content: center;
    width: 100%;
    overflow: hidden;  /* Veiligheid tegen uitsteken */
  }

  /* Icon knoppen compacter maken */
  .btn-icon {
    width: 38px;       /* Iets smaller om ruimte te winnen */
    height: 38px;
    padding: 0;
    flex: 0 0 38px;    /* Voorkomen dat de pijltjes krimpen */
  }

  .btn-icon svg {
    width: 20px; 
    height: 20px;        
  }

  /* Middenknop: Maximaal flexibel */
  .week-picker {
    flex: 1 1 auto;    /* Laat de picker de restruimte vullen */
    min-width: 0;
    display: flex;
    justify-content: center;
  }

  .week-picker-btn {
    width: 100%;       /* Vul de beschikbare flex-ruimte */
    min-width: 0;      /* Cruciaal voor tekst-afkapping */
    min-height: 38px;
    padding: 0 8px;    /* Minder padding aan zijkanten wint veel ruimte */
    gap: 4px;          /* Minder ruimte tussen tekst en pijltje */
    
    /* Belangrijk: Geen vaste breedtes gebruiken, maar restruimte vullen */
    max-width: 100%; 
  }

  .wp-label {
    min-width: 0;
    flex: 0 1 auto;    /* Laat de tekst krimpen indien nodig */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 0.9rem; /* Iets kleiner font voor betere fit */
    font-weight: 600;
  }

  .wp-caret {
    flex: 0 0 auto;    /* Pijltje mag nooit krimpen */
  }

  .wp-caret svg {
    width: 14px;
    height: 14px;
  }
}

/* Extra tweak voor de allerkleinste schermen (<340px) */
@media (max-width:340px) {
  .week-controls { gap: 4px; }
  .wp-label { font-size: 0.85rem; }
  .week-picker-btn { padding: 0 4px; }
}

/* =========================================
   LIGHT/DARK MODE SWITCH STYLING
   ========================================= */

/* De hoofdcontainer: bootst de grid van .nav-link na zonder de styling ervan */
.mode-switch-item {
    display: grid;
    grid-template-columns: 30px 1fr; /* Exacte match met icon kolom */
    column-gap: 24px;
    align-items: center;
    /* padding: Top Right Bottom Left */
    padding: 8px 14px 14px 14px;
    width: 100%;
    background: transparent;
    border: none;
    cursor: default;
}

/* Kolom voor de switch: zorgt voor verticale uitlijning onder de iconen */
.mode-switch-icon-col {
    grid-column: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 30px;
}

/* De switch-container (de hitbox) */
.mode-switch-container {
    position: relative;
    display: block;
    width: 44px; /* Iets breder dan de kolom is geen probleem voor de klikbaarheid */
    height: 24px;
    cursor: pointer;
    flex-shrink: 0;
}

/* Verberg de checkbox input zelf */
.mode-switch-input {
    opacity: 0;
    width: 0;
    height: 0;
    position: absolute;
}

/* De slider track */
.mode-switch-slider {
    position: absolute;
    inset: 0;
    background-color: var(--panel-2);
    border: 1px solid var(--border);
    border-radius: 30px;
    transition: background-color 0.3s, border-color 0.3s;
}

/* Het witte bolletje */
.mode-switch-slider::before {
    content: "";
    position: absolute;
    height: 18px;
    width: 18px;
    left: 2px;
    bottom: 2px;
    background-color: var(--text);
    border-radius: 50%;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 5;
}

/* Animatie van het bolletje */
.mode-switch-input:checked + .mode-switch-slider::before {
    transform: translateX(20px);
}

/* Iconen binnen de slider */
.sun-icon, .moon-icon {
    position: absolute;
    width: 12px;
    height: 12px;
    top: 5px;
    stroke-width: 2.5;
    fill: none;
    transition: opacity 0.3s ease;
    z-index: 2;
}

/* Zon icoon rechts (zichtbaar bij light mode / checked) */
.sun-icon {
    right: 5px;
    stroke: #ff9e00;
}

/* Maan icoon links (zichtbaar bij dark mode / unchecked) */
.moon-icon {
    left: 5px;
    stroke: var(--muted);
}

/* =========================================
   RESPONSIVE LOGICA (DESKTOP VS MOBILE)
   ========================================= */

@media (min-width: 900px) {
    /* Ingeklapt: Verberg label en centreer switch in de sidebar breedte */
    html:not(.sidebar-open) .mode-switch-item .nav-label {
        display: none;
    }
    
    html:not(.sidebar-open) .mode-switch-item {
        grid-template-columns: 1fr;
        justify-items: center;
        padding-left: 0;
        padding-right: 0;
    }

    html:not(.sidebar-open) .mode-switch-icon-col {
        width: 100%;
        justify-content: center;
    }
}

/* Mobile: Forceer linker uitlijning van de switch op de iconen-as */
@media (max-width: 899px) {
    .mode-switch-icon-col {
        justify-content: flex-start;
    }
}